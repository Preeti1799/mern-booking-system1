{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import useFetch from\"../../hooks/useFetch\";import axios from\"axios\";import\"./featuredProperties.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FeaturedProperties=()=>{const{data,loading,error}=useFetch(\"/api/hotels/featured?featured=true&limit=4\");// Match backend route\nconst[properties,setProperties]=useState([]);const[inrRate,setInrRate]=useState(83);// Default INR rate\nconst selectedDate=\"2024-04-01\";useEffect(()=>{if(Array.isArray(data)){setProperties(data);}},[data]);useEffect(()=>{const fetchInrRate=async()=>{try{const res=await axios.get(`${process.env.REACT_APP_API_URL||\"http://localhost:8800\"}/api/hotels/inrRate?date=${selectedDate}`);setInrRate(res.data.inrRate);}catch(err){console.error(\"Failed to fetch INR rate\",err);}};fetchInrRate();},[selectedDate]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error.message||\"Something went wrong\"]});return/*#__PURE__*/_jsx(\"div\",{className:\"fp\",children:properties.length>0?properties.map((item,index)=>{var _item$photos;return/*#__PURE__*/_jsxs(\"div\",{className:`fpItem fpItem${index+1}`,children:[/*#__PURE__*/_jsx(\"img\",{src:((_item$photos=item.photos)===null||_item$photos===void 0?void 0:_item$photos[0])||\"https://picsum.photos/300\",alt:item.name,className:\"fpImg\",onError:e=>e.target.src=\"https://picsum.photos/300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"fpName\",children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"fpCity\",children:item.city}),/*#__PURE__*/_jsx(\"span\",{className:\"fpPrice\",children:item.cheapestPrice?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Starting from $\",item.cheapestPrice]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u20B9\",(item.cheapestPrice*inrRate).toLocaleString(\"en-IN\")]})]}):\"Price unavailable\"}),item.rating?/*#__PURE__*/_jsxs(\"div\",{className:\"fpRating\",children:[/*#__PURE__*/_jsx(\"button\",{children:item.rating}),/*#__PURE__*/_jsx(\"span\",{children:\"Excellent\"})]}):/*#__PURE__*/_jsx(\"span\",{children:\"No rating available\"})]},item._id);}):/*#__PURE__*/_jsx(\"p\",{children:\"No properties found.\"})});};export default FeaturedProperties;","map":{"version":3,"names":["React","useState","useEffect","useFetch","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FeaturedProperties","data","loading","error","properties","setProperties","inrRate","setInrRate","selectedDate","Array","isArray","fetchInrRate","res","get","process","env","REACT_APP_API_URL","err","console","className","children","message","length","map","item","index","_item$photos","src","photos","alt","name","onError","e","target","city","cheapestPrice","toLocaleString","rating","_id"],"sources":["C:/Users/paswa/Mern stack/Mern-stack-hotel-booking-App/client/src/components/featuredProperties/FeaturedProperties.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport axios from \"axios\";\r\nimport \"./featuredProperties.css\";\r\n\r\nconst FeaturedProperties = () => {\r\n  const { data, loading, error } = useFetch(\"/api/hotels/featured?featured=true&limit=4\"); // Match backend route\r\n  const [properties, setProperties] = useState([]);\r\n  const [inrRate, setInrRate] = useState(83); // Default INR rate\r\n\r\n  const selectedDate = \"2024-04-01\";\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(data)) {\r\n      setProperties(data);\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    const fetchInrRate = async () => {\r\n      try {\r\n        const res = await axios.get(\r\n          `${process.env.REACT_APP_API_URL || \"http://localhost:8800\"}/api/hotels/inrRate?date=${selectedDate}`\r\n        );\r\n        setInrRate(res.data.inrRate);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch INR rate\", err);\r\n      }\r\n    };\r\n    fetchInrRate();\r\n  }, [selectedDate]);\r\n\r\n  if (loading) return <div className=\"loading\">Loading...</div>;\r\n  if (error) return <div className=\"error\">Error: {error.message || \"Something went wrong\"}</div>;\r\n\r\n  return (\r\n    <div className=\"fp\">\r\n      {properties.length > 0 ? (\r\n        properties.map((item, index) => (\r\n          <div className={`fpItem fpItem${index + 1}`} key={item._id}>\r\n            <img\r\n              src={item.photos?.[0] || \"https://picsum.photos/300\"}\r\n              alt={item.name}\r\n              className=\"fpImg\"\r\n              onError={(e) => (e.target.src = \"https://picsum.photos/300\")}\r\n            />\r\n            <span className=\"fpName\">{item.name}</span>\r\n            <span className=\"fpCity\">{item.city}</span>\r\n            <span className=\"fpPrice\">\r\n              {item.cheapestPrice ? (\r\n                <>\r\n                  <div>Starting from ${item.cheapestPrice}</div>\r\n                  <div>\r\n                    â‚¹{(item.cheapestPrice * inrRate).toLocaleString(\"en-IN\")}\r\n                  </div>\r\n                </>\r\n              ) : (\r\n                \"Price unavailable\"\r\n              )}\r\n            </span>\r\n            {item.rating ? (\r\n              <div className=\"fpRating\">\r\n                <button>{item.rating}</button>\r\n                <span>Excellent</span>\r\n              </div>\r\n            ) : (\r\n              <span>No rating available</span>\r\n            )}\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <p>No properties found.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeaturedProperties;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAElC,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAEC,IAAI,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAGX,QAAQ,CAAC,4CAA4C,CAAC,CAAE;AACzF,KAAM,CAACY,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAE5C,KAAM,CAAAkB,YAAY,CAAG,YAAY,CAEjCjB,SAAS,CAAC,IAAM,CACd,GAAIkB,KAAK,CAACC,OAAO,CAACT,IAAI,CAAC,CAAE,CACvBI,aAAa,CAACJ,IAAI,CAAC,CACrB,CACF,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEVV,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,CACzB,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,uBAAuB,4BAA4BR,YAAY,EACrG,CAAC,CACDD,UAAU,CAACK,GAAG,CAACX,IAAI,CAACK,OAAO,CAAC,CAC9B,CAAE,MAAOW,GAAG,CAAE,CACZC,OAAO,CAACf,KAAK,CAAC,0BAA0B,CAAEc,GAAG,CAAC,CAChD,CACF,CAAC,CACDN,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACH,YAAY,CAAC,CAAC,CAElB,GAAIN,OAAO,CAAE,mBAAOP,IAAA,QAAKwB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,CAC7D,GAAIjB,KAAK,CAAE,mBAAON,KAAA,QAAKsB,SAAS,CAAC,OAAO,CAAAC,QAAA,EAAC,SAAO,CAACjB,KAAK,CAACkB,OAAO,EAAI,sBAAsB,EAAM,CAAC,CAE/F,mBACE1B,IAAA,QAAKwB,SAAS,CAAC,IAAI,CAAAC,QAAA,CAChBhB,UAAU,CAACkB,MAAM,CAAG,CAAC,CACpBlB,UAAU,CAACmB,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,QAAAC,YAAA,oBACzB7B,KAAA,QAAKsB,SAAS,CAAE,gBAAgBM,KAAK,CAAG,CAAC,EAAG,CAAAL,QAAA,eAC1CzB,IAAA,QACEgC,GAAG,CAAE,EAAAD,YAAA,CAAAF,IAAI,CAACI,MAAM,UAAAF,YAAA,iBAAXA,YAAA,CAAc,CAAC,CAAC,GAAI,2BAA4B,CACrDG,GAAG,CAAEL,IAAI,CAACM,IAAK,CACfX,SAAS,CAAC,OAAO,CACjBY,OAAO,CAAGC,CAAC,EAAMA,CAAC,CAACC,MAAM,CAACN,GAAG,CAAG,2BAA6B,CAC9D,CAAC,cACFhC,IAAA,SAAMwB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAEI,IAAI,CAACM,IAAI,CAAO,CAAC,cAC3CnC,IAAA,SAAMwB,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAEI,IAAI,CAACU,IAAI,CAAO,CAAC,cAC3CvC,IAAA,SAAMwB,SAAS,CAAC,SAAS,CAAAC,QAAA,CACtBI,IAAI,CAACW,aAAa,cACjBtC,KAAA,CAAAE,SAAA,EAAAqB,QAAA,eACEvB,KAAA,QAAAuB,QAAA,EAAK,iBAAe,CAACI,IAAI,CAACW,aAAa,EAAM,CAAC,cAC9CtC,KAAA,QAAAuB,QAAA,EAAK,QACF,CAAC,CAACI,IAAI,CAACW,aAAa,CAAG7B,OAAO,EAAE8B,cAAc,CAAC,OAAO,CAAC,EACrD,CAAC,EACN,CAAC,CAEH,mBACD,CACG,CAAC,CACNZ,IAAI,CAACa,MAAM,cACVxC,KAAA,QAAKsB,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBzB,IAAA,WAAAyB,QAAA,CAASI,IAAI,CAACa,MAAM,CAAS,CAAC,cAC9B1C,IAAA,SAAAyB,QAAA,CAAM,WAAS,CAAM,CAAC,EACnB,CAAC,cAENzB,IAAA,SAAAyB,QAAA,CAAM,qBAAmB,CAAM,CAChC,GA5B+CI,IAAI,CAACc,GA6BlD,CAAC,EACP,CAAC,cAEF3C,IAAA,MAAAyB,QAAA,CAAG,sBAAoB,CAAG,CAC3B,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAApB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}